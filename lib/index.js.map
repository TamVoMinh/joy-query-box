{"version":3,"sources":["webpack://joy-query-box/webpack/bootstrap","webpack://joy-query-box/./node_modules/prop-types/index.js","webpack://joy-query-box/external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://joy-query-box/external {\"root\":\"pegjs\",\"commonjs\":\"pegjs\",\"commonjs2\":\"pegjs\",\"amd\":\"pegjs\"}","webpack://joy-query-box/./src/gramma.pegjs","webpack://joy-query-box/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://joy-query-box/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://joy-query-box/external {\"root\":\"brace\",\"commonjs\":\"brace\",\"commonjs2\":\"brace\",\"amd\":\"brace\"}","webpack://joy-query-box/./node_modules/brace/theme/github.js","webpack://joy-query-box/./src/simpleQuery.mode.js","webpack://joy-query-box/./src/index.jsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","Error","getShim","isRequired","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","ace","define","acequire","isDark","cssClass","cssText","importCssString","SimpleQueryRules","_window$ace$acequire$","_this","_classCallCheck","this","keywordMapper","_possibleConstructorReturn","_getPrototypeOf","createKeywordMapper","keyword","constant.language","storage.type","$rules","start","token","regex","end","normalizeRules","_inherits","window","TextHighlightRules","SimpleQueryMode","_this2","HighlightRules","Mode","pegparser","PEG","grammar","QueryBox","src_classCallCheck","src_getPrototypeOf","_defineProperty","src_assertThisInitialized","__editor","val","parsed","freetext","trim","parse","e","onSearch","aceEditor","React","createRef","PureComponent","inputClassName","className","external_root_React_commonjs_react_commonjs2_react_amd_react_default","a","createElement","ref","id","hanleQueryChange","edit","current","editor","setOptions","maxLines","autoScrollEditorIntoView","highlightActiveLine","printMargin","showGutter","theme","fontSize","commands","addCommand","bindKey","sender","mac","windows","exec","getSession","getValue","setMode","queryText","setValue","placeholder","autoFocus"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","module.exports = require(\"react\");","module.exports = require(\"pegjs\");","module.exports = \"// Simple API Query Grammar\\n// ==========================\\n\\n{\\n\\tfunction parseAnd(res, term){\\n    \\treturn Object.assign(res, term);\\n    }\\n    \\n    function parseOr(res, term){\\n    \\treturn res.$or.push(term)\\n    }\\n    \\n    function parselogicExpr (res, op ,term) {\\n    \\treturn op === '$and' ? parseAnd(res, term) : parseOr(res, term);\\n    }\\n    \\n\\tfunction ParseConjExpr(head, tail){\\n    \\tif(!tail.length) return head;\\n        var result = tail.reduce(function(res, element, ix){\\n        \\tvar op = element[1];\\n            var term = element[3];\\n    \\n        \\tif(ix === 0) parselogicExpr(res, op, head);\\n            parselogicExpr(res, op, term);\\n            return res;\\n        },{$or:[]});\\n        \\n        if(!result.$or.length) delete result.$or;\\n        \\n        return result;\\n    }\\n}\\n\\nSimpleQuery\\t\\t= head:IrlExpr tail:(_ LogicOperators _ IrlExpr)* {return ParseConjExpr(head, tail)}\\nIrlExpr\\t\\t\\t= ConjExpr / GroupExpr\\nGroupExpr\\t\\t= LP _ exprs:ConjExpr _ RP {return exprs}\\nConjExpr\\t\\t= head:CompExpr tail:(_ LogicOperators _ CompExpr)* {return ParseConjExpr(head, tail)}\\nCompExpr \\t\\t= left:Identifier _ op:CompOperators _ right:Expr { return {[left]: {[op]: right}} }\\n\\nLogicOperators \\t= logicOp:(AndOp / OrOp) {return logicOp}\\nAndOp \\t\\t\\t= \\\"&\\\" {return \\\"$and\\\"}\\nOrOp\\t\\t\\t= \\\"|\\\" {return \\\"$or\\\" }\\nLP\\t\\t\\t\\t= \\\"(\\\"\\nRP\\t\\t\\t\\t= \\\")\\\"\\n    \\nCompOperators \\t= Equal / GreaterThanOrEqual / GreaterThan / LessThanOrEqual / LessThan / StartWith / Contains / Like\\nEqual\\t\\t\\t\\t= \\\"=\\\"\\t{return \\\"$eq\\\"}\\nDiff\\t\\t\\t\\t= \\\"#\\\"\\t{return \\\"$dif\\\"}\\nGreaterThan \\t\\t= \\\">\\\"\\t{return \\\"$gt\\\"} \\nGreaterThanOrEqual \\t= \\\">=\\\"\\t{return \\\"$gte\\\"} \\nLessThan \\t\\t\\t= \\\"<\\\"\\t{return \\\"$lt\\\"} \\nLessThanOrEqual \\t= \\\"<=\\\"\\t{return \\\"$lte\\\"} \\nStartWith \\t\\t\\t= \\\"$=\\\"\\t{return \\\"$startWith\\\"} \\nContains \\t\\t\\t= \\\"@=\\\"\\t{return \\\"$contains\\\"} \\nLike \\t\\t\\t    = \\\"%=\\\"\\t{return \\\"$like\\\"} \\n\\nExpr = Float / Integer / Identifier / String\\n\\nIdentifier \\t= [a-zA-Z0-9_]+ {return text()}\\n\\nNumber \\t= Float / Integer\\nInteger = n:[0-9]+ {return parseInt(n.join(\\\"\\\"));}\\nFloat\\t= left:Integer \\\".\\\" right:Integer { return parseFloat([left.toString(), right.toString()].join(\\\".\\\"))}\\n\\nString \\t= \\\"'\\\" str:ValidStringChar* \\\"'\\\" {return str.join(\\\"\\\")}\\nValidStringChar\\t= !\\\"'\\\" c:. { return c;}\\n\\n_ \\\"whitespace\\\"\\n  = (\\\" \\\"\\n  / \\\"\\\\t\\\"\\n  / \\\"\\\\v\\\"\\n  / \\\"\\\\f\\\")*\"","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = require(\"brace\");","ace.define(\"ace/theme/github\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\nexports.isDark = false;\nexports.cssClass = \"ace-github\";\nexports.cssText = \"\\\n.ace-github .ace_gutter {\\\nbackground: #e8e8e8;\\\ncolor: #AAA;\\\n}\\\n.ace-github  {\\\nbackground: #fff;\\\ncolor: #000;\\\n}\\\n.ace-github .ace_keyword {\\\nfont-weight: bold;\\\n}\\\n.ace-github .ace_string {\\\ncolor: #D14;\\\n}\\\n.ace-github .ace_variable.ace_class {\\\ncolor: teal;\\\n}\\\n.ace-github .ace_constant.ace_numeric {\\\ncolor: #099;\\\n}\\\n.ace-github .ace_constant.ace_buildin {\\\ncolor: #0086B3;\\\n}\\\n.ace-github .ace_support.ace_function {\\\ncolor: #0086B3;\\\n}\\\n.ace-github .ace_comment {\\\ncolor: #998;\\\nfont-style: italic;\\\n}\\\n.ace-github .ace_variable.ace_language  {\\\ncolor: #0086B3;\\\n}\\\n.ace-github .ace_paren {\\\nfont-weight: bold;\\\n}\\\n.ace-github .ace_boolean {\\\nfont-weight: bold;\\\n}\\\n.ace-github .ace_string.ace_regexp {\\\ncolor: #009926;\\\nfont-weight: normal;\\\n}\\\n.ace-github .ace_variable.ace_instance {\\\ncolor: teal;\\\n}\\\n.ace-github .ace_constant.ace_language {\\\nfont-weight: bold;\\\n}\\\n.ace-github .ace_cursor {\\\ncolor: black;\\\n}\\\n.ace-github.ace_focus .ace_marker-layer .ace_active-line {\\\nbackground: rgb(255, 255, 204);\\\n}\\\n.ace-github .ace_marker-layer .ace_active-line {\\\nbackground: rgb(245, 245, 245);\\\n}\\\n.ace-github .ace_marker-layer .ace_selection {\\\nbackground: rgb(181, 213, 255);\\\n}\\\n.ace-github.ace_multiselect .ace_selection.ace_start {\\\nbox-shadow: 0 0 3px 0px white;\\\n}\\\n.ace-github.ace_nobold .ace_line > span {\\\nfont-weight: normal !important;\\\n}\\\n.ace-github .ace_marker-layer .ace_step {\\\nbackground: rgb(252, 255, 0);\\\n}\\\n.ace-github .ace_marker-layer .ace_stack {\\\nbackground: rgb(164, 229, 101);\\\n}\\\n.ace-github .ace_marker-layer .ace_bracket {\\\nmargin: -1px 0 0 -1px;\\\nborder: 1px solid rgb(192, 192, 192);\\\n}\\\n.ace-github .ace_gutter-active-line {\\\nbackground-color : rgba(0, 0, 0, 0.07);\\\n}\\\n.ace-github .ace_marker-layer .ace_selected-word {\\\nbackground: rgb(250, 250, 255);\\\nborder: 1px solid rgb(200, 200, 250);\\\n}\\\n.ace-github .ace_invisible {\\\ncolor: #BFBFBF\\\n}\\\n.ace-github .ace_print-margin {\\\nwidth: 1px;\\\nbackground: #e8e8e8;\\\n}\\\n.ace-github .ace_indent-guide {\\\nbackground: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y;\\\n}\";\n\n    var dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n});\n","\nexport class SimpleQueryRules extends window.ace.acequire(\"ace/mode/text_highlight_rules\").TextHighlightRules {\n\tconstructor() {\n\t\tsuper();\n\t\tvar keywords = (\"like|contains|startwith|equal|not|between|and|or\");\n    \n        var builtinConstants = (\"true|false\");\n    \n        var dataTypes = (\"int|numeric|decimal|date|bit|money\");\n    \n        var keywordMapper = this.createKeywordMapper({\n            \"keyword\": keywords,\n            \"constant.language\": builtinConstants,\n            \"storage.type\": dataTypes\n        }, \"identifier\", true);\n    \n        this.$rules = {\n            \"start\" : [ {\n                token : \"comment\",\n                regex : \"--.*$\"\n            },  {\n                token : \"comment\",\n                start : \"/\\\\*\",\n                end : \"\\\\*/\"\n            }, {\n                token : \"string\",           // \" string\n                regex : '\".*?\"'\n            }, {\n                token : \"string\",           // ' string\n                regex : \"'.*?'\"\n            }, {\n                token : \"string\",           // ` string (apache drill)\n                regex : \"`.*?`\"\n            }, {\n                token : \"constant.numeric\", // float\n                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n            }, {\n                token : keywordMapper,\n                regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n            }, {\n                token : \"keyword.operator\",\n                regex : \"\\\\&|\\\\||<=|=>|==|!=|<>|=\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[\\\\(]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\)]\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            } ]\n        };\n        this.normalizeRules();\n\t}\n}\n\nexport default class SimpleQueryMode extends window.ace.acequire('ace/mode/text').Mode {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.HighlightRules = SimpleQueryRules;\n\t}\n}\n\n","import React from 'react';\nimport { func , string, bool} from 'prop-types';\nimport * as PEG from 'pegjs';\nimport grammar from './gramma.pegjs';\nimport 'brace';\nimport 'brace/theme/github';\n//import ace from 'ace-builds';\nimport SimpleQueryMode from './simpleQuery.mode';\n\nconst pegparser = PEG.generate(grammar);\nclass QueryBox extends React.PureComponent {\n    static propTypes = {\n        className: string,\n        placeholder: string,\n        onSearch: func.isRequired,\n        queryText: string,\n        autoFocus: bool\n    }\n\n    constructor(props) {\n        super(props);\n        this.aceEditor = React.createRef();\n      }\n\n    render(){\n        const inputClassName = this.props.className || 'flex-fill border py-2';\n        return (\n            <div className={inputClassName}>\n                <div ref={this.aceEditor} id=\"query-text-box\"></div>\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        const hanleQueryChange = this.hanleQueryChange;\n        this.__editor =  ace.edit(this.aceEditor.current);\n        this.editor().setOptions({\n            maxLines: 1,\n            autoScrollEditorIntoView: true,\n            highlightActiveLine: false,\n            printMargin: false,\n            showGutter: false,\n            theme: \"ace/theme/github\",\n            fontSize: 13,\n        });\n        this.editor().commands.addCommand({\n            name: 'submit-query',\n            bindKey: {\n                sender:     \"editor|cli\",\n                mac:        \"Enter\",\n                windows:    \"Enter\"\n            },\n            exec: editor => hanleQueryChange(editor.getSession().getValue())\n        });\n        this.editor().getSession().setMode(new SimpleQueryMode());\n        this.props.queryText && this.editor().getSession().setValue(this.props.queryText);\n        \n    }\n\n    editor = () => this.__editor;\n\n    hanleQueryChange = val => {\n        let err = null;\n        let parsed = null;\n        let freetext = '';\n        try {\n            freetext = val.trim();\n            parsed = freetext ? pegparser.parse(freetext): {};\n        }\n        catch(e) {\n            err = e;\n        } finally{\n           this.props.onSearch(err, parsed, freetext);\n        }\n    }\n}\n\nexport default QueryBox;\n"],"sourceRoot":""}